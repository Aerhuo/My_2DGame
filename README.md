
# é¡¹ç›®ä»‹ç»

ç®€å•çš„æœŸæœ«é¡¹ç›®ï¼Œç±»å¸è¡€é¬¼å¹¸å­˜è€…çš„2Då°æ¸¸æˆï¼Œé¢„æœŸå®ç°ç®€å•AIè‡ªåŠ¨å¯»è·¯å’Œç®€å•è‚‰é¸½å…ƒç´ ã€‚

---

# ğŸ® é¡¹ç›®å¼€å‘æŒ‡å—ï¼šæä¼Ÿå³°æ¢¦å¢ƒå¤§å†’é™© (Dream Adventure)

**ç‰ˆæœ¬**: 1.0.0  
**æ¶æ„**: C (C99/C11) + CMake + Windows Console API  
**æ ¸å¿ƒå¼•æ“**: Custom Text Renderer (æ— å›¾å½¢åº“ä¾èµ–)

---

## 1. ğŸ“‚ é¡¹ç›®ç»“æ„è¯´æ˜

è¯·ä¸¥æ ¼éµå®ˆä»¥ä¸‹ç›®å½•è§„èŒƒï¼Œä¸è¦éšæ„ç§»åŠ¨æ–‡ä»¶ã€‚

```text
My_2DGame/
â”œâ”€â”€ CMakeLists.txt       # é¡¹ç›®æ„å»ºé…ç½®ï¼ˆä¸è¦åŠ¨ï¼ï¼‰
â”œâ”€â”€ include/             # å¤´æ–‡ä»¶ (.h)
â”‚   â”œâ”€â”€ DataManager.h    # è´¦å·ä¸å­˜æ¡£ç®¡ç† (Save/Load)
â”‚   â”œâ”€â”€ Game.h           # æ¸¸æˆæ ¸å¿ƒæµç¨‹æ§åˆ¶ (State Machine)
â”‚   â”œâ”€â”€ GameData.h       # æ¸¸æˆæ•°å€¼å®šä¹‰ (é“å…·/æ€ªç‰©/ä¸»è§’ç»“æ„)
â”‚   â””â”€â”€ Renderer.h       # ç»˜å›¾å¼•æ“æ¥å£ (æ‰€æœ‰å±å¹•è¾“å‡ºå¿…é¡»è°ƒè¿™é‡Œ)
â”œâ”€â”€ src/                 # æºæ–‡ä»¶ (.c)
â”‚   â”œâ”€â”€ DataManager.c    # å­˜æ¡£è¯»å†™å®ç°
â”‚   â”œâ”€â”€ Game.c           # æ¸¸æˆé€»è¾‘å®ç° (èœå•/æ¸¸æˆå¾ªç¯)
â”‚   â”œâ”€â”€ GameData.c       # ã€ç­–åˆ’é‡ç‚¹ã€‘æ•°å€¼é…ç½®è¡¨
â”‚   â”œâ”€â”€ Renderer.c       # æ¸²æŸ“å¼•æ“åº•å±‚å®ç°
â”‚   â””â”€â”€ Main.c           # ç¨‹åºå…¥å£
â”œâ”€â”€ users.txt            # (è‡ªåŠ¨ç”Ÿæˆ) ç”¨æˆ·å­˜æ¡£
â””â”€â”€ scores.txt           # (è‡ªåŠ¨ç”Ÿæˆ) æ’è¡Œæ¦œæ•°æ®
```

---

## 2. âš™ï¸ æ ¸å¿ƒæ¶æ„ä¸å¼€å‘é€»è¾‘

æœ¬é¡¹ç›®é‡‡ç”¨ **"åˆå§‹åŒ– -> æ¸¸æˆå¾ªç¯ (è¾“å…¥/æ›´æ–°/ç»˜åˆ¶) -> é”€æ¯"** çš„æ ‡å‡†æ¸¸æˆæ¶æ„ã€‚

### 2.1 çŠ¶æ€æœº (State Machine)

`Game.c` é€šè¿‡ `GameState` æšä¸¾æ§åˆ¶å½“å‰æ˜¾ç¤ºå“ªä¸ªç•Œé¢ã€‚
*   `STATE_MENU`: ä¸»èœå•
*   `STATE_PLAYING`: **æ ¸å¿ƒæ¸¸æˆé€»è¾‘ï¼ˆå¤§å®¶ä¸»è¦æ”¹è¿™é‡Œï¼‰**
*   `STATE_SETTINGS`: è®¾ç½®
*   `STATE_Score`: æ’è¡Œæ¦œ

### 2.2 æ¸²æŸ“æœºåˆ¶ (Renderer)
*   **ç¦æ­¢ä½¿ç”¨** `printf`ã€`system("cls")`ã€`scanf`ï¼ˆç™»å½•ç•Œé¢é™¤å¤–ï¼‰ã€‚
*   **å¿…é¡»ä½¿ç”¨** `Renderer.h` æä¾›çš„æ¥å£ï¼š
    *   `DrawChar(x, y, c)`: ç”»å­—ç¬¦
    *   `DrawStr(x, y, str)`: ç”»å­—ç¬¦ä¸²
    *   `DrawStrCenter(y, str)`: å±…ä¸­ç”»å­—ç¬¦ä¸²
*   **åæ ‡ç³»**: å·¦ä¸Šè§’ä¸º `(0, 0)`ï¼ŒXè½´å‘å³ (0-119)ï¼ŒYè½´å‘ä¸‹ (0-29)ã€‚

### 2.3 å¸§ç‡ä¸æ—¶é—´
*   **FPS å›ºå®šä¸º 30**ã€‚å³æ¯ç§’åˆ·æ–° 30 æ¬¡ã€‚
*   æ‰€æœ‰çš„è®¡æ—¶å™¨ï¼ˆTimerï¼‰å•ä½å‡ä¸º **å¸§**ã€‚
*   ä½¿ç”¨å® `SEC(x)` å¯ä»¥æ–¹ä¾¿åœ°æŠŠç§’è½¬ä¸ºå¸§ï¼ˆä¾‹å¦‚ `SEC(5)` ä»£è¡¨ 5ç§’ï¼‰ã€‚

---

## 3. ğŸ‘¨â€ğŸ’» å¼€å‘åˆ†å·¥ä¸è§„èŒƒ (å¿…è¯»)

### A. å¦‚æœä½ æ˜¯ã€ç­–åˆ’ / æ•°å€¼è®¾è®¡ã€‘
ä½ åªéœ€è¦å…³æ³¨ `src/GameData.c`ã€‚
*   **è°ƒæ•´æ€ªç‰©**: ä¿®æ”¹ `characterConfigs` æ•°ç»„ã€‚
*   **è°ƒæ•´é“å…·**: ä¿®æ”¹ `itemConfigs` æ•°ç»„ã€‚
*   **è§„èŒƒ**:
    *   **é€Ÿåº¦**: å•ä½æ˜¯â€œæ ¼/ç§’â€ï¼Œ**ä¸¥ç¦è¶…è¿‡ 15.0**ï¼Œå¦åˆ™æ€ªç‰©ä¼šç©¿å¢™ç¬ç§»ã€‚
    *   **æƒé‡**: æ™®é€šç‰©å“å¡« 100ï¼Œç¨€æœ‰å¡« 25ã€‚

### B. å¦‚æœä½ æ˜¯ã€é€»è¾‘ç¨‹åºå‘˜ã€‘
ä½ ä¸»è¦åœ¨ `src/Game.c` çš„ `RunGameFrame()` å‡½æ•°ä¸­å·¥ä½œã€‚
*   **æ·»åŠ é€»è¾‘**: æ¯”å¦‚æŒ‰é”®æ£€æµ‹ã€æ€ªç‰©ç§»åŠ¨ã€ç¢°æ’æ£€æµ‹ã€‚
*   **å¼•ç”¨æ•°æ®**: å¼•å…¥ `GameData.h`ï¼Œé€šè¿‡ `player` å’Œ `enemies` æ•°ç»„æ“ä½œå®ä½“ã€‚
*   **æ³¨æ„**: æ¯ä¸€å¸§éƒ½ä¼šæ¸…ç©ºå±å¹•ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨æ“¦é™¤ä¸Šä¸€å¸§çš„å­—ç¬¦ï¼Œåªéœ€è¦ç”»å‡ºå½“å‰å¸§çš„ä½ç½®å³å¯ã€‚

### C. å¦‚æœä½ æ˜¯ã€ç³»ç»Ÿç¨‹åºå‘˜ã€‘
è´Ÿè´£ `DataManager.c` (å­˜æ¡£) æˆ– `Renderer.c` (åº•å±‚ä¼˜åŒ–)ã€‚
*   **æ³¨æ„**: æ¶‰åŠæ–‡ä»¶è¯»å†™æ—¶ï¼Œè¯·ç¡®ä¿ `fclose` è¢«è°ƒç”¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚

---

## 4. ğŸš€ å¦‚ä½•è¿è¡Œä¸ç¼–è¯‘

æœ¬é¡¹ç›®ä½¿ç”¨ **CMake** å®ç°å…¨è‡ªåŠ¨æ„å»ºã€‚

### ç¯å¢ƒè¦æ±‚
*   Visual Studio Code
*   æ’ä»¶: C/C++ (Microsoft), CMake Tools (Microsoft)
*   ç¼–è¯‘å™¨: MinGW / GCC (éœ€æ”¯æŒ C99)

### æ­¥éª¤
1.  ç”¨ VS Code æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ã€‚
2.  åº•éƒ¨çŠ¶æ€æ é€‰æ‹©ç¼–è¯‘å™¨ (Select Kit -> GCC ...)ã€‚
3.  ç‚¹å‡»åº•éƒ¨çš„ **Build** (é½¿è½®å›¾æ ‡) ç¼–è¯‘ã€‚
4.  ç‚¹å‡»åº•éƒ¨çš„ **Run** (æ’­æ”¾å›¾æ ‡) è¿è¡Œã€‚

---

## 5. âš ï¸ å¼€å‘çº¢çº¿ (Don't Do This)

1.  **ä¸è¦åœ¨æ¸¸æˆå¾ªç¯é‡Œä»å¤´å®šä¹‰å¤§æ•°æ®**ï¼š
    *   âŒ `void RunGameFrame() { int bigArray[10000]; ... }` (ä¼šçˆ†æ ˆ)
    *   âœ… ä½¿ç”¨ `static` æˆ–å…¨å±€å˜é‡ï¼Œæˆ–åœ¨å †ä¸Š `malloc`ã€‚
2.  **ä¸è¦åœ¨æ¸¸æˆå¾ªç¯é‡Œè¯»å†™æ–‡ä»¶**ï¼š
    *   IO æ“ä½œææ…¢ï¼Œä¼šå¯¼è‡´æ¸¸æˆå¡é¡¿ã€‚æ–‡ä»¶è¯»å†™åªåº”åœ¨â€œåˆå§‹åŒ–â€æˆ–â€œä¿å­˜æ—¶â€è¿›è¡Œä¸€æ¬¡ã€‚
3.  **ä¸è¦ä¿®æ”¹ `SCREEN_WIDTH` å’Œ `SCREEN_HEIGHT`**ï¼š
    *   ç›®å‰å›ºå®šä¸º 120x30ï¼Œä¿®æ”¹ä¼šå¯¼è‡´åº•å±‚æ¸²æŸ“é”™ä½ã€‚
4.  **ä¸­è‹±æ–‡æ··æ’æ³¨æ„**ï¼š
    *   åŠ¨æ€ç§»åŠ¨çš„ç‰©ä½“ï¼ˆå¦‚ä¸»è§’ `@`ï¼‰å°½é‡ä¸è¦é‡å åœ¨æ±‰å­—æ–‡æœ¬ä¸Šï¼Œå¦åˆ™ä¼šå‡ºç°å­—ç¬¦æ®‹ç•™æˆ–ä¹±ç ã€‚

---

## 6. æ ¸å¿ƒæ•°æ®ç»“æ„é€ŸæŸ¥

### ä¸»è§’ (Player)
ä½äº `GameData.h`
```c
player.x, player.y   // åæ ‡
player.hp            // ç”Ÿå‘½å€¼
player.atk           // æ”»å‡»åŠ›
player.config.symbol // æ˜¾ç¤ºçš„å­—ç¬¦ (é€šå¸¸æ˜¯ '@')
```

### æ•Œäºº (Enemies)
ä½äº `GameData.h`
```c
enemies[i].x, enemies[i].y // åæ ‡
enemies[i].hp              // ç”Ÿå‘½å€¼
// éå†æ—¶è¯·æ£€æŸ¥æ•Œäººæ˜¯å¦å­˜æ´» (æ ¹æ®é€»è¾‘å®ç°ï¼Œé€šå¸¸ hp > 0)
```

### é“å…· (Items)
ä½äº `GameData.c` é…ç½®è¡¨
```c
itemConfigs[i].spawnRate // ç”Ÿæˆæƒé‡
itemConfigs[i].duration  // æŒç»­æ—¶é—´(å¸§)
```

---

*Good luck, have fun! è®©æˆ‘ä»¬ä¸€èµ·å®Œæˆè¿™ä¸ªâ€œæ¢¦å¢ƒâ€ï¼*
